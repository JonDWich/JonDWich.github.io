<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics | Jon Wich - Portfolio</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <!-- Ribbon -->
    <header class = "navbar">
        <div class = "name">Jon Wich</div>

        <div class = "project-nav"> 
            <a href="project4.html" class="nav-btn">← Previous Project</a>
            <a href="project2.html" class="nav-btn">Next Project →</a>
        </div>

        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../contact.html">Contact</a></li>
            </ul>
        </nav>
     </header>

     <!-- Main -->
      <main>
        <article class="project-details">
            <h1>Physics Overhaul</h1>

            <div class="project-image">
                <img src="../images/project1.jpg" alt="Project 1">
            </div>

            <div class="project-info">
                <div class="info-item">
                    <span class="label">Technologies:</span>
                    <span class="value">Lua!!</span>
                </div>

                <div class="info-item">
                    <span class="label">Duration:</span>
                    <span class="value">A year lol</span>
                </div>
            </div>

            <section class="project-description">
                <h2>Project Overview</h2>
                <p>In a long running series of high speed, physics based platformers that let the player use the terrain to fling themselves through levels, <i>Sonic The Hedgehog (2006)</i> is notable for lacking almost all of that.</p>
                <p>Slopes don't affect your speed, leaving the ground sends you at a fixed speed with no acceleration or deceleration, there's no momentum or inertia, characters turn on a dime without slowing down, and plenty of other staples are simply absent from this title.</p>
                <p>For years, overhauling the controls was a pipedream, but in early 2024 the modding scene saw a breakthrough which allowed manipulating pointer data directly through the game's native Lua framework.<br></p>
                
                <p>As a showcase of this new tech, I began implementing a physics system for character movement.</p>
                <p>Over time, this project grew to include restoring cut content, fixing broken features, and adding new ones to polish up the entire experience.</p>
                <p>While a proper deep dive is outside the scope of this page, I've included some of the more interesting challenges below.</p>
                <!-- Expandable parts! -->
                 <div class="expandable-section">
                    <button class="expand-btn">Project Goals</button>
                    <div class="expandable-content">
                        <p>In character movement, "physics" are somewhat loose; mechanics are often fudged (or even excluded) to create a smoother player experience, so I had to decide what to even implement in the first place.
                        After analyzing other games in the series, I settled on the following mechanics:</p>
                        <ul>
                            <li>Gravitational Acceleration: Running uphill should slow you down and vice versa. This is absent in the Retail game.</li>
                            <li>Momentum/Inertia: Speed should be preserved between actions/states. In Retail, the player typically snaps between pre-determined values.</li>
                            <li>Slope Launches: Related to the above, when the player runs off an incline, they should receive an upward boost based on speed and angle, creating a natural launch.</li>
                            <li>Rotation Dampening: Turning resistance should increase directly with speed, and speed should decrease during sharp turns. The former somewhat exists in Retail, but it's a static resistance and negligible.</li>
                        </ul>
                    </div>
                 </div>

                 <div class="expandable-section">
                    <button class="expand-btn">Technical Challenges</button>
                    <div class="expandable-content">
                        <p>While overhauling a game's movement system isn't unheard of in this series, typically it involves extensive code injection (making the game load a DLL where you can write your own C++ code, hooking existing game functions and whatnot).
                        This is possible in Sonic 06 as well, it's how we can access pointers via Lua in the first place, but creating one is a significantly more involved process and requires some software that's quite hard to come by. 
                        The method used for it also only supports loading one DLL at a time, meaning mods could run into compatibility issues if the community starts using their own DLLs in their projects.</p>

                        <p>With that in mind, I decided to write this project in Lua.</p>
                        <p>The advantages to running everything through the game's Lua framework were that I sidestepped DLL compatibility concerns and gained a few other perks, such as faster prototyping (functions could be modified or added on the fly since nothing is compiled) and full compatibility with any patches or other mods that may edit character behavior through the executable. 
                            It also provided a chance to make modding the game more accessible as Lua is a very beginner friendly language. I wrote a library alongside the project, allowing one to easily modify character attributes, adjust hitboxes, and more as well as a framework for creating new character states and modifying existing ones.</p>
                        
                        <p>Unfortunately, using Lua meant I was completely beholden to the game's existing behavior. My mod acts like a layer sitting on top of the executable code; while it can utilize existing systems, and even implement new ones for its own use, it can't change what it's sitting on. 
                            For example, when you jump, the game snaps you to a set horizontal speed defined in a parameter file. This state performs that snap every frame while you remain in it, meaning if I tried to write to your horizontal speed value, my change would get ignored, and since the state is lower level than my script, I couldn't easily change the behavior.</p>
                        <p>To fix this, I instead located where values from that parameter file were stored in memory, placed their offsets into a table, then wrote functions for getting and setting the values by name. 
                            From there, I could simply update the corresponding value as you run along the ground, and the game would keep you at the correct speed when you enter the air, with aerial deceleration happening by lowering the value.</p>
                    </div>
                 </div>
            </section>
        </article>
      </main>

      <footer>
        <div class="footer-content">
            <div class="footer-nav-left">
                <a href="project4.html" class="footer-nav-btn">← Previous Project</a>
            </div>

            <div class="footer-copyright">
                <p>&copy; 2025 Jonathan Wich. All rights reserved.</p>
            </div>

            <div class="footer-nav-right">
                <a href="project2.html" class="footer-nav-btn">Next Project →</a>
            </div>
        </div>
     </footer>

     <script src="../js/script.js"></script>
</body>
</html>